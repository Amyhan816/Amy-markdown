## 4.6 重载单目运算符

#### 有一个Time类，包含minute和sec，模拟秒表，每秒走一次，满60秒进一分钟，此时秒又从0开始算。

```cpp
#include<iostream>
using namespace std;
class Time
{
public:
    Time(){minute=0;sec=0;}//默认构造函数
    Time(int m,int s):minute(m),sec(s){}//构造函数重载
    Time operator++();//声明运算符重载成员函数
    void display(){cout<<minute<<":"<<sec<<endl;}
private:
    int minute;
    int sec;
};
Time Time::operator++()//定义运算符重载成员函数
{
    if(++sec>=60)
    {
        sec-=60;
        ++minute;
    }
    return *this;//返回当前对象值
}
int main()
{
    Time time1(34,0);
    for(int i=0;i<61;i++)
    {
        ++time1;
        time1.display();
    }
    return 0;
}


```

++/--前置和后置区分：

增加一个int型形参，就是后置自增/自减运算符函数

*下面增加对后置自增运算符重载*

```cpp
#include<iostream>
using namespace std;
class Time
{
public:
    Time(){minute=0;sec=0;}
    Time(int m,int s):minute(m),sec(s){}
    Time operator++();//声明前置自增运算符++重载函数
    Time operator++(int);//声明后置自增运算符++重载函数
    void display(){cout<<minute<<":"<<sec<<endl;}
private:
    int minute;
    int sec;
};
Time Time::operator++()
{
    if(++sec>=60)
    {
        sec-=60;
        ++minute;
    }
    return *this;
}
Time Time::operator++(int)
{
    Time temp(*this);//建立临时变量，存储自增前的值
    sec++;
    if(sec>=60)
    {
        sec-=60;
        ++minute;
    }
    return temp;//返回的是自增前的对象
}
int main()
{
    Time time1(34,59),time2;
    cout<<" time1: ";
    time1.display();//初始值
    ++time1;//前置自增
    cout<<"++time1: ";time1.display();//先自增，后输出
    time2=time1++;//time2保存的是time1第二次自增前的值
    cout<<"time1++: ";time1.display();//time1已经第二次自增
    cout<<"time2: ";time2.display();//time1第二次自增前的值
    return 0;
}


```

<img title="" src="file:///C:/Users/a3341/Pictures/Typedown/3bc8a6e1-adb6-4dd2-8c92-dc32e9df393f.png" alt="3bc8a6e1-adb6-4dd2-8c92-dc32e9df393f" style="zoom:50%;">


